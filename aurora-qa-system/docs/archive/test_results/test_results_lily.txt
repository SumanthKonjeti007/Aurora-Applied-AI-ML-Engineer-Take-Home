================================================================================
QUERY: What dining reservations has Lily O'Sullivan requested for her trip?
================================================================================

Initializing Hybrid Retriever...

ðŸ”§ Initializing Hybrid Retriever...
  1/3 Loading semantic search (embeddings)...
Loading embedding model: BAAI/bge-small-en-v1.5...
âœ… Model loaded (dimension: 384)

ðŸ“‚ Loading embedding index...
   âœ“ FAISS index: data/embeddings_faiss.index
âœ… Loaded 3349 messages
   FAISS vectors: 3349
   Model: BAAI/bge-small-en-v1.5
   Strategy: message_only
  2/3 Loading keyword search (BM25)...

ðŸ“‚ Loading BM25 index...
âœ… Loaded 3349 messages
   Corpus size: 3349 documents
  3/3 Loading knowledge graph...
âœ… Knowledge graph loaded from data/knowledge_graph.pkl
  4/4 Building name resolver...
       Indexed 10 users
âœ… Hybrid Retriever ready!

================================================================================

[1] SEMANTIC SEARCH (Top 10)
--------------------------------------------------------------------------------
Retrieved 10 results

 1. Score:0.3286 | Amina Van Den Berg        | If possible, could you get us reservations at a chef's table for an exclusive di...
 2. Score:0.3335 | Lorenzo Cavalli           | I'd like dinner reservations at the new Michelin-star restaurant opening in Manh...
 3. Score:0.3344 | Armand Dupont             | Can you make a dinner reservation for a party of 8 at a seafood restaurant in Bo...
 4. Score:0.3352 | Amina Van Den Berg        | Could you reconfirm our dinner reservations at Nobu Malibu?...
 5. Score:0.3355 | Lily O'Sullivan           | I'd like reservations at the chefâ€™s table in Alinea, Chicago next month....
 6. Score:0.3380 | Hans MÃ¼ller               | Has the dinner reservation at La Petite Maison been confirmed?...
 7. Score:0.3439 | Fatima El-Tahir           | Could you confirm my reservation for the private dining room at Le Bernardin?...
 8. Score:0.3443 | Fatima El-Tahir           | Please follow up on the restaurant reservations I requested for Paris....
 9. Score:0.3447 | Lorenzo Cavalli           | Can I get a reservation for 5 at the top steakhouse in Manhattan?...
10. Score:0.3508 | Hans MÃ¼ller               | Book a dinner reservation for eight at Blue Hill for this Friday....

[2] BM25 KEYWORD SEARCH (Top 10)
--------------------------------------------------------------------------------
Retrieved 10 results

 1. Score:13.3038 | Lily O'Sullivan           | We found the event planner exceptional; thank her personally for us....
 2. Score:11.8991 | Lily O'Sullivan           | Any update on the dinner reservation I requested in Venice?...
 3. Score:11.6323 | Lily O'Sullivan           | Can you get reservations at Osteria Francescana for the 25th?...
 4. Score:11.6323 | Lily O'Sullivan           | Please confirm the cultural tour reservations for Thailand next August....
 5. Score:11.4433 | Lily O'Sullivan           | I'm sending flowers to my wife; make sure they are her favorite lilies and roses...
 6. Score:10.8873 | Lily O'Sullivan           | Please ensure my suite has an espresso machine before arrival....
 7. Score:10.6956 | Lily O'Sullivan           | What's our confirmation timeframe for May's Muscovite ballet tickets?...
 8. Score:10.6956 | Lily O'Sullivan           | What other countries are ideal for quarantine-free travel right now?...
 9. Score:10.6243 | Lily O'Sullivan           | Please make sure the hotel has vegan options available for breakfast....
10. Score:10.6243 | Lily O'Sullivan           | Ensure the driver has ADA credentials for my upcoming transportation needs....

[3] KNOWLEDGE GRAPH SEARCH (Top 10)
--------------------------------------------------------------------------------
      Users detected: ["Lily O'Sullivan"]
      Keywords: ['dining', 'reservations', 'lily', 'sullivan', 'requested']
      Detected relationship type: RENTED/BOOKED

Retrieved 10 results

 1. Lily O'Sullivan           | I'd like to schedule a business class flight to New York City next Monday....
 2. Lily O'Sullivan           | I need a suite with a city view in Hong Kong next week....
 3. Lily O'Sullivan           | Please book a penthouse room at The Peninsula in May....
 4. Lily O'Sullivan           | I'd like box seats for Kings' games this seasonâ€”can you arrange it?...
 5. Lily O'Sullivan           | I prefer window seats when you book my flights....
 6. Lily O'Sullivan           | I need assistance with securing Hamilton tickets in New York for tomorrow....
 7. Lily O'Sullivan           | Would you book a table for my party of six at The Ivy next Thursday?...
 8. Lily O'Sullivan           | Could I get a reservation at a top-rated Italian restaurant this Sunday?...
 9. Lily O'Sullivan           | I need a private villa rental in Mykonos for a week in July....
10. Lily O'Sullivan           | Can you get me a dinner reservation at Le Bernardin this Saturday?...

[4] RRF FUSION - STATIC WEIGHTS
--------------------------------------------------------------------------------
Weights: semantic=0.7, bm25=1.5, graph=0.8

Top 10 after RRF:

 1. RRF:0.0246 [BM25#1                   ] | Lily O'Sullivan           | We found the event planner exceptional; thank her personally for ...
 2. RRF:0.0242 [BM25#2                   ] | Lily O'Sullivan           | Any update on the dinner reservation I requested in Venice?...
 3. RRF:0.0238 [BM25#3                   ] | Lily O'Sullivan           | Can you get reservations at Osteria Francescana for the 25th?...
 4. RRF:0.0234 [BM25#4                   ] | Lily O'Sullivan           | Please confirm the cultural tour reservations for Thailand next A...
 5. RRF:0.0231 [BM25#5                   ] | Lily O'Sullivan           | I'm sending flowers to my wife; make sure they are her favorite l...
 6. RRF:0.0227 [BM25#6                   ] | Lily O'Sullivan           | Please ensure my suite has an espresso machine before arrival....
 7. RRF:0.0224 [BM25#7                   ] | Lily O'Sullivan           | What's our confirmation timeframe for May's Muscovite ballet tick...
 8. RRF:0.0221 [BM25#8                   ] | Lily O'Sullivan           | What other countries are ideal for quarantine-free travel right n...
 9. RRF:0.0217 [BM25#9                   ] | Lily O'Sullivan           | Please make sure the hotel has vegan options available for breakf...
10. RRF:0.0214 [BM25#10                  ] | Lily O'Sullivan           | Ensure the driver has ADA credentials for my upcoming transportat...

[5] TOP 5 RESULTS - FULL CONTEXT
================================================================================

[1] User: Lily O'Sullivan
    Message: We found the event planner exceptional; thank her personally for us.
    RRF Score: 0.0246
    Message ID: c49ff375-86dc-4aeb-a554-0185e54fe85f

[2] User: Lily O'Sullivan
    Message: Any update on the dinner reservation I requested in Venice?
    RRF Score: 0.0242
    Message ID: 7094aa82-8636-4a8d-9bfa-7cfe748bd8de

[3] User: Lily O'Sullivan
    Message: Can you get reservations at Osteria Francescana for the 25th?
    RRF Score: 0.0238
    Message ID: edda1cb1-084f-41ca-aea6-63793dad0c0f

[4] User: Lily O'Sullivan
    Message: Please confirm the cultural tour reservations for Thailand next August.
    RRF Score: 0.0234
    Message ID: 52e75902-183f-40e9-a359-c6b3cfbbbece

[5] User: Lily O'Sullivan
    Message: I'm sending flowers to my wife; make sure they are her favorite lilies and roses.
    RRF Score: 0.0231
    Message ID: 9a140504-8b39-43a3-9449-c20582827a56

[6] RETRIEVAL ANALYSIS
================================================================================

Top-10 Overlap:
  Semantic âˆ© BM25:   0 messages
  Semantic âˆ© Graph:  0 messages
  BM25 âˆ© Graph:      0 messages
  All three:         0 messages

Top-5 Source Contributions:
  Semantic: 0/5 messages
  BM25:     5/5 messages
  Graph:    0/5 messages

Entity Filtering:
  Top-5 from Lily O'Sullivan: 5/5 messages

================================================================================
